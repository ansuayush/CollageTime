@model ExecViewHrk.Models.DdlRelationshipTypeVm

<script>
    function gridRelationshipTypeEdit(e) {
        e.preventDefault();
        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var data = grid.dataItem(row);
        var formURL = $("#ApplicationUrl").val() + '/LookupTables/DdlRelationshipTypesDetails?relationshipTypeId=' + data.RelationshipTypeId;
        $("#EditDetailDiv .md-content").html("");
        $("#EditDetailDiv .md-content").load(formURL);
        $('#EditDetailDiv').toggle('slide', { direction: 'right' }, 500);
        $('#EditDetailDiv').addClass('md-show');
    }

    function gridRelationshipTypeDelete(e) {
        e.preventDefault();
        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var data = grid.dataItem(row);
        var postData = { relationshipTypeId: data.RelationshipTypeId };
        var formURL = $("#ApplicationUrl").val() + "LookupTables/DdlRelationshipTypesDelete";
        confirmDialog("", function () {
            $.post(formURL, postData, function (data, status) {
                if (data.succeed == false) {
                    toastr.error(data.Message);
                } else {
                    toastr.success('Record deleted successfully.');
                    resetGrid("gridDdlRelationshipType");
                }
            });
        });
    }
    function addDdlRelationshipType() {
        var formURL = $("#ApplicationUrl").val() + '/LookupTables/DdlRelationshipTypesDetails?relationshipTypeId=' + 0;
        $("#EditDetailDiv .md-content").html("");
        $("#EditDetailDiv .md-content").load(formURL);
        $('#EditDetailDiv').toggle('slide', { direction: 'right' }, 500);
        $('#EditDetailDiv').addClass('md-show');
    }
</script>
<div class="container-fluid">
    <div class="row p-t-15">
        <div class="col-lg-12 col-md-12">

            <div class="main-header col-sm-12 p-0 m-b-0">
                <div class="col-md-9 m-b-15 p-0">
                    <h4>Relationship Type <span class="pull-right icon-edit-block m-l-30"><i class="fa fa-expand f-24" onclick="javascript:toggleFullScreen()"></i></span></h4>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 p-0">
                <div class="card-block p-10 m-b-10 b-b-muted b-t-muted">
                    <div class="col-md-9 p-0">
                        <button type="button" onclick="addDdlRelationshipType();" class="btn btn-primary waves-effect waves-light b-radius-2 text-tranform-normal myButton">
                            <i class="fa fa-plus"></i><span class="m-l-10">Add New Record</span>
                        </button>
                    </div>
                    <div class="col-md-3 pull-right text-right">
                        <div class="form-group row m-b-0">&nbsp;</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 p-0">
                <div class="row">
                    <div class="col-lg-12 col-md-12">
                        <div class="theme-grid">
                            @(Html.Kendo().Grid<ExecViewHrk.Models.DdlRelationshipTypeVm>()
        .Name("gridDdlRelationshipType")
        .Resizable(resize => resize.Columns(true))
        .Filterable()
        .Editable(editable => editable.Mode(GridEditMode.InLine))
        .Columns(columns =>
        {
            columns.Command(command =>
            {
                command.Custom("gridEditCommand").Text("<i class='fa fa-pencil txt-primary f-18'></i>").Click("gridRelationshipTypeEdit");
                command.Custom("gridDeleteCommand").Text("<i class='fa fa-trash-o m-0 txt-danger f-18'></i>").Click("gridRelationshipTypeDelete");
            }).Width(70);
            columns.Bound(c => c.RelationshipTypeId).Visible(false);
            columns.Bound(c => c.Code);
            columns.Bound(c => c.Description);
            columns.Bound(c => c.Active).ClientTemplate("#= Active ? 'Yes' : 'No' #"); ;
            columns.Bound(c => c.CobraEligible).ClientTemplate("#= CobraEligible ? 'Yes' : 'No' #");
            columns.Bound(c => c.IsSpouse).ClientTemplate("#= IsSpouse ? 'Yes' : 'No' #");
        })
        .Sortable()
        .Selectable()
        .Pageable(pageable => pageable.Refresh(true).PageSizes(true))
        .DataSource(dataSource => dataSource
            .Ajax()
                            .Read(read => read.Action("DdlRelationshipTypesList_Read", "LookupTables"))          
            .Model(model =>
            {
                model.Id(p => p.RelationshipTypeId);
                model.Field(p => p.Code);
                model.Field(p => p.Description);
                model.Field(p => p.Active);
                model.Field(p => p.CobraEligible);
                model.Field(p => p.IsSpouse);
            }
                  )
            .Batch(false)
            .Events(events =>
            {
                events.Error("refreshGrid");
                events.RequestEnd("gridRequestEnd");
            })
        )
                            )
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(".k-grid-add").click(function () {
            setTimeout(function () {
                $('a[class*="k-grid-update"]').html('<span class="k-icon k-update"></span>Create');
            }, 1)
        });
    });
</script>

