@model ExecViewHrk.WebUI.Models.BusinessLevelsDetailVm
@{
    ViewBag.Title = "Business Levels List";
    Layout = null;


 }
<div class="content-wrapper">

    <div class="container-fluid">
        <div class="row p-t-15">
            <div class="col-lg-12 col-md-12">
                <div class="main-header col-sm-12 p-0 m-b-0">
                    <div class="col-md-9 m-b-15 p-0">
                        <h4>Business Level List <span class="pull-right icon-edit-block m-l-30"> <i class="fa fa-expand f-24" onclick="javascript:toggleFullScreen()"></i></span></h4>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 p-0">
                    <div class="card-block p-10 m-b-10 b-b-muted b-t-muted">
                        <div class="col-md-9 p-0">
                            <button type="button" class="btn btn-primary waves-effect waves-light b-radius-2 text-tranform-normal" onclick="addBusinessLevels()">
                                <i class="fa fa-plus"></i><span class="m-l-10">Add New Record</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 p-0">
                    <div class="row ">
                        <div class="col-md-12">
                            <div class="theme-grid">

                                @(Html.Kendo().Grid<ExecViewHrk.WebUI.Models.BusinessLevelsDetailVm>()
                                        .Name("gridPositionBusinessLevels")
                                        .Resizable(resize => resize.Columns(true))
                                        .Filterable()
                                        .Editable(editable => editable.Mode(GridEditMode.InLine))
                                        .HtmlAttributes(new { @class = "table table-striped table-bordered" })
                                        .Events(eventss => eventss.DetailExpand("gridPositionDetailExpand"))
                                        .Columns(columns =>
                                        {
                                            columns.Command(command =>
                                            {
                                                command.Custom("gridEditCommand").Text("<i class='fa fa-pencil txt-primary f-18'></i>").Click("gridBusinessLevelsEdit");
                                                command.Custom("gridDeleteCommand").Text("<i class='fa fa-trash-o m-0 txt-danger f-18'></i></a>").Click("gridDeleteBusinessLevels");
                                                //command.Custom("gridDeleteCommand").Text("<i class='fa fa-trash-o m-0 txt-danger f-18'></i></a>").Click("gridDelete");
                                            }).Width(100);
                                            columns.Bound(c => c.BusinessLevelTitle).Title("Title");
                                            columns.Bound(c => c.BusinessLevelCode).Title("Code");
                                            columns.Bound(c => c.ParentBULevelTitle).Title("Parent Business Level");
                                            columns.Bound(c => c.EIN).Title("EIN");
                                            columns.Bound(c => c.EEoDesc).Title("EEO");
                                            columns.Bound(c => c.BudgetReported).Title("Budget Reporting");

                                        })

                                        .Sortable()
                                        .Selectable()
                                          .ClientDetailTemplateId("template")
                                        .Pageable(pageable => pageable
                                            .Refresh(false)
                                            .PageSizes(true)
                                            .ButtonCount(5))
                                        .DataSource(dataSource => dataSource
                                            .Ajax()


                                        .Read(read => read.Action("PositionBusinessLevelsList_Read", "BusinessLevels"))
                                        //.Create(create => create.Action("DepartmentsList_Create", "BusinessLevels"))
                                        //.Update(update => update.Action("DepartmentsList_Update", "BusinessLevels"))
                                        .Destroy(destroy => destroy.Action("PositionBusinessLevelsList_Destroy", "BusinessLevels"))
                                        .Model(model =>
                                        {
                                            model.Id(p => p.BusinessLevelTitle);
                                            model.Field(p => p.EEoDesc);
                                            model.Field(p => p.BusinessLevelCode);
                                            model.Field(p => p.BusinessLevelNbr);
                                            model.Field(p => p.BusinessLevelNotes);
                                            model.Field(p => p.ParentBULevelNbr);
                                            model.Field(p => p.ParentBULevelTitle);
                                            model.Field(p => p.EIN);
                                            model.Field(p => p.EnteredBy);
                                        }
                                              )
                                        .Batch(false)
                                        .Events(events =>
                                        {
                                            events.Error("refreshGrid");
                                            events.RequestEnd("gridRequestEnd");
                                        })
                                            )
                                )

                            </div>

                        </div>
                    </div>
                </div>
                </div>
        </div>
    </div>

</div>

<script type="text/javascript">
    $(".k-grid-add").click(function () {
        setTimeout(function () {
            $('a[class*="k-grid-update"]').html('<span class="k-icon k-update"></span>Create');
        }, 1)
    });

</script>
<script id="template" type="text/kendo-tmpl">
    <div class='employee-details'>
        <ul>
            <li><label>Pay Frequency : </label> #=PayFrequency#</li>
            <li><label>Location : </label> #=LocationDescription#</li>
            <li><label>Buisness Level Type : </label> #=BusinessLevelTypeDescription#</li>
            <li><label>Active : </label> #=Active#</li>
            <li><label>Scheduled Hours : </label> #=SchedeuledHours#</li>
        </ul>
    </div>
</script>
<script>
    function dataBound() {
        this.expandRow(this.tbody.find("tr.k-master-row").first());
    }
</script>
<script type="text/javascript">
    $(".k-grid-add").click(function () {
        setTimeout(function () {
            $('a[class*="k-grid-update"]').html('<span class="k-icon k-update"></span>Create');
        }, 1)
    });

</script>