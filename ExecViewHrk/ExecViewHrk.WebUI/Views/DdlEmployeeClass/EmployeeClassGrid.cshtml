@{
    ViewBag.Title = "Employee Class";
    Layout = null;
}
<script type="text/javascript">
    function gridemployeeDelete(e) {
        e.preventDefault();
        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var data = grid.dataItem(row);
        var Id = data.EmployeeClassId;
       // var postData = { Id: data.EmployeeClassId };
        var formURL = $("#ApplicationUrl").val() + "/DdlEmployeeClass/DdlEmployeeclassList_Destroy?Id=" + Id;
        confirmDialog("", function () {
            $.post(formURL, function (data, status) {
                if (data.succeed == false) {
                    toastr.error(data.Message);
                } else {

                    resetGrid("gridemployeeclass");
                }
            });
        });
    }
    function addemployeeclass() {
        debugger
        openEmployeeAddDetailpopup(0);
    }
    function openEmployeeAddDetailpopup(_Id) {
        loading(true);
        var formURL = $("#ApplicationUrl").val() + '/DdlEmployeeClass/EmployeeAddDetail?Id=' + _Id;
        $("#EditDetailDiv .md-content").html("");
        $("#EditDetailDiv .md-content").load(formURL);
        $('#EditDetailDiv').toggle('slide', { direction: 'right' }, 500);
        $('#EditDetailDiv').addClass('md-show');
      
    }

    function gridemployeeEdit(e) {
        debugger
        e.preventDefault();
        var grid = this;
        var row = $(e.currentTarget).closest("tr");
        var data = grid.dataItem(row);
        openeditEmployeepopup(data.EmployeeClassId);
    }
    function openeditEmployeepopup(_Id) {
        loading(true);
        var formURL = $("#ApplicationUrl").val() + '/DdlEmployeeClass/EditEmployeeclass?EmployeeClassId=' + _Id;
        $("#EditDetailDiv .md-content").html("");
        $("#EditDetailDiv .md-content").load(formURL);
        $('#EditDetailDiv').toggle('slide', { direction: 'right' }, 500);
        $('#EditDetailDiv').addClass('md-close');
    }
</script>
<div class="container-fluid">
    <div class="row p-t-15">
        <div class="col-lg-12 col-md-12">

            <div class="main-header col-sm-12 p-0 m-b-0">
                <div class="col-md-9 m-b-15 p-0">
                    <h4>Employee Class<span class="pull-right icon-edit-block m-l-30"><i class="fa fa-expand f-24" onclick="javascript:toggleFullScreen()"></i></span></h4>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 p-0">
                <div class="card-block p-5 p-l-0 m-b-10 b-b-muted b-t-muted">
                    <div class="col-md-9 p-0">
                        <button type="button" class="btn btn-primary waves-effect waves-light b-radius-2 text-tranform-normal" onclick="addemployeeclass()">
                            <i class="fa fa-plus"></i><span class="m-l-10">Add New Record</span>
                        </button>
                    </div>
                    <div class="col-md-3 pull-right text-right">
                        <div class="form-group row m-b-0">&nbsp;</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 p-0">
                <div class="row">
                    <div class="col-lg-12 col-md-12">
                        <div class="theme-grid">
                            @(Html.Kendo().Grid<ExecViewHrk.Models.EmployeeClassVm>()
                                          .Name("gridemployeeclass")
                            .Resizable(resize => resize.Columns(true))
                            .Filterable()
                            .Editable(editable => editable.Mode(GridEditMode.InLine))
                            .Columns(columns =>
                            {
                                columns.Command(command =>
                                {
                                    command.Custom("gridEditCommand").Text("<i class='fa fa-pencil txt-primary f-18'></i>").Click("gridemployeeEdit");
                                    command.Custom("gridDeleteCommand").Text("<i class='fa fa-trash-o m-0 txt-danger f-18'></i>").Click("gridemployeeDelete");
                                }).Width(70);
                                //columns.Bound(c => c.EmployeeClassId);
                                columns.Bound(c => c.ClassName);
                                //columns.Bound(c => c.CreatedBy);
                               // columns.Bound(c => c.CreatedDate);
                                //columns.Bound(c => c.ModifiedBy);
                               // columns.Bound(c => c.ModifiedDate);
                                columns.Bound(c => c.IsActive).ClientTemplate("#= IsActive ? 'Yes' : 'No' #"); ;
                            })
                            .Sortable()
                            .Selectable()
                            .Pageable(pageable => pageable.Refresh(false).PageSizes(true))
                            .Events(e => e.DataBound("gridDataBound"))
                            .DataSource(dataSource => dataSource
                            .Ajax()
                                                  .Read(read => read.Action("DdlEmployeeClassList_Read", "DdlEmployeeClass"))
                                                 // .Create(create => create.Action("DdlEmployeeClassList_Create", "DdlEmployeeClass"))
                                                 // .Update(update => update.Action("DdlEmployeeClassList_Update", "DdlEmployeeClass"))
                                                  .Destroy(destroy => destroy.Action("DdlEmployeeClassList_Destroy", "DdlEmployeeClass"))
                                                .Model(model =>
                                                {
                                                    model.Id(p => p.EmployeeClassId);
                                                    model.Field(p => p.EmployeeClassId).Editable(false);
                                                    model.Field(p => p.ClassName);
                                                    model.Field(p => p.IsActive);
                                                }
                                        )
                                    .Batch(false)
                                    .Events(events =>
                                    {
                                        events.Error("refreshGrid");
                                        events.RequestEnd("gridRequestEnd");
                                    })
                                    )
                            )
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(".k-grid-add").click(function () {
        setTimeout(function () {
            $('a[class*="k-grid-update"]').html('<span class="k-icon k-update"></span>Create');
        }, 1)
    });
    function error_handler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);

            $('#grid').data('kendoGrid').dataSource.read();
            $('#grid').data('kendoGrid').refresh();
        }
    }
  


</script>

