@using System.Web.Routing;

@{
    ViewBag.Title = "Earnings Codes";

}

@{

    string alert = "";

    if (ViewBag.AlertMessage != null)
    {
        alert = (string)ViewBag.AlertMessage;
    }
}

<div class="container-fluid">
    <div class="row p-t-15">
        <div class="col-lg-12 col-md-12">

            <div class="main-header col-sm-12 p-0 m-b-0">
                <div class="col-md-9 m-b-15 p-0">
                    <h4>Earnings Codes <span class="pull-right icon-edit-block m-l-30"><i class="fa fa-expand f-24" onclick="javascript:toggleFullScreen()"></i></span></h4>
                </div>
            </div>

            <div class="col-lg-12 col-md-12 p-0">
                <div class="card-block p-10 m-b-10 b-b-muted b-t-muted">
                    <div class="col-md-9 p-0">
                        <button type="button" class="btn btn-primary waves-effect waves-light b-radius-2 text-tranform-normal" onclick="addEarningsCode()">
                            <i class="fa fa-plus"></i><span class="m-l-10">Add New Record</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-12 col-md-12 p-0">
                <div class="row">
                    <div class="col-lg-12 col-md-12">
                        <div class="theme-grid">
                            @(Html.Kendo().Grid<ExecViewHrk.Models.EarningCodeVm>()
                                        .Name("gridEarningsCode")
                                        .Resizable(resize => resize.Columns(true))
                                        .Filterable()
                                        //.Editable(editable => editable.Mode(GridEditMode.InLine))
                                        //.ToolBar(toolbar => toolbar.Create())

                                        .Columns(columns =>
                                        {
                                            columns.Command(command =>
                                            {
                                                command.Custom("gridEditCommand").Text("<i class='fa fa-pencil txt-primary f-18'></i>").Click("gridEarningsCodeEdit");
                                                command.Custom("gridDeleteCommand").Text("<i class='fa fa-trash-o m-0 txt-danger f-18'></i>").Click("gridEarningsCodeDelete");
                                            }).Width(60);
                                            columns.Bound(c => c.EarningsCodeId).Width(100).Hidden();
                                            columns.ForeignKey(c => c.CompanyCodeId, (System.Collections.IEnumerable)ViewData["companycodesList"], "CompanyCodeId", "CompanyCodeDescription")
                                            .Title("Company Code").Width(110);
                                            columns.Bound(c => c.EarningsCode).Title("Earnings Code").Width(110);
                                            columns.Bound(c => c.EarningsCodeDescription).Width(180);
                                            columns.ForeignKey(c => c.ADPFieldMappingId, (System.Collections.IEnumerable)ViewData["adpFieldMappingsList"], "ADPFieldMappingId", "ADPFieldMappingCode")
                                            .Title("ADP Field Mapping").Width(140);
                                            columns.Bound(c => c.EarningsCodeOffset).Title("Memo Code 1").Width(100);
                                            columns.Bound(c => c.DeductionCodeOffset).Title("Memo Code 2").Width(100);
                                            columns.Bound(c => c.Active).ClientTemplate("#= Active ? 'Yes' : 'No' #").Width(100);
                                        })
                                        .HtmlAttributes(new { style = "height: 480px;" })

                                        .Scrollable()
                                       // .Groupable()
                                        .Sortable()
                                        .Selectable()

                                        .Pageable(pageable => pageable
                                            .Refresh(false)
                                            .PageSizes(true)
                                            .ButtonCount(5))
                                        .DataSource(dataSource => dataSource
                                            .Ajax()


                                                            .Read(read => read.Action("EarningsCodesList_Read", "EarningsCodes"))
                                                            .Create(create => create.Action("EarningsCodesList_Create", "EarningsCodes"))
                                                            .Update(update => update.Action("EarningsCodesList_Update", "EarningsCodes"))
                                                            .Destroy(destroy => destroy.Action("EarningsCodesList_Destroy", "EarningsCodes"))
                                        .Model(model =>
                                        {
                                            model.Id(p => p.EarningsCodeId);
                                            model.Field(p => p.EarningsCodeId).Editable(false);
                                            model.Field(p => p.CompanyCodeId).DefaultValue(0);
                                            model.Field(p => p.EarningsCode);
                                            model.Field(p => p.EarningsCodeDescription);
                                            model.Field(p => p.EarningsCodeOffset);
                                            model.Field(p => p.DeductionCodeOffset);
                                            model.Field(p => p.ADPFieldMappingId).DefaultValue(1);
                                        }
                                              )
                                        .Batch(false)
                                        
                                            )
                            )
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>



@*<style>
        .k-grid {
            font-size: 11px;
        }

        .k-grid {
            line-height: 2em;
        }
        /*.k-edit-form-container{
                width: auto
            }*/
    </style>


    <script type="text/javascript">
        $(".k-grid-add").click(function () {
            setTimeout(function () {
                $('a[class*="k-grid-update"]').html('<span class="k-icon k-update"></span>Create');
            }, 1)
        });

    </script>*@



