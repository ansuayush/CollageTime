@model ExecViewHrk.WebUI.Models.PersonBasicVm
<div class="card p-15">
    <div class="card-header">
        <h5 class="card-header-text">Person Detail</h5>
    </div>
    <div class="card-block">
        <div class="row">
            @using (Html.BeginForm("Person", "Person", FormMethod.Post, new { role = "form", id = "PersonForm" }))
            {

                @Html.HiddenFor(model => model.PersonId, new { id = "hiddenPersonId" })
                @Html.ValidationSummary(true)

                <div class="col-sm-3">
                    <div class="form-group ">
                        <label><span style="color:red">*</span>SSN</label>
                        @Html.TextBoxFor(x => x.Ssn, new { @class = "form-control", data_type = "SSN", data_required = "Y", id = "ssn1"})
                        @Html.ValidationMessageFor(x => x.Ssn)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span style="color:red">*</span>Last Name</label>
                        @Html.TextBoxFor(x => x.LastName, new { @class = "form-control ", data_required = "Y" })
                        @Html.ValidationMessageFor(x => x.LastName)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span style="color:red">*</span>First Name</label>
                        @Html.TextBoxFor(x => x.FirstName, new { @class = "form-control", data_required = "Y" })
                        @Html.ValidationMessageFor(x => x.FirstName)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Middle Name</label>
                        @Html.TextBoxFor(x => x.MiddleName, new { @class = "form-control" })
                        @Html.ValidationMessageFor(x => x.MiddleName)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Preferred Name</label>
                        @Html.TextBoxFor(x => x.PreferredName, new { @class = "form-control" })
                        @Html.ValidationMessageFor(x => x.PreferredName)
                    </div>
                </div>
                <div class="col-sm-3">

                    <div class="form-group">
                        <label>Maiden Name</label>
                        @Html.TextBoxFor(x => x.MaidenName, new { @class = "form-control" })
                        @Html.ValidationMessageFor(x => x.MaidenName)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span style="color:red">*</span>Email</label>
                        @if (Model.PersonId > 0)
                        {
                            @Html.TextBoxFor(x => x.Email, new { @class = "form-control", data_required = "Y" })
                        }
                        else
                        {
                            @Html.TextBoxFor(x => x.Email, new { @class = "form-control", data_required = "Y" })
                        }
                        @Html.ValidationMessageFor(x => x.Email)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Alternate Email</label>
                        @Html.TextBoxFor(x => x.AlternateEmail, new { @class = "form-control" })
                        @Html.ValidationMessageFor(x => x.AlternateEmail)
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class=" form-group ">
                        <label>Marital Status</label>
                        <div class="input-group">
                            @Html.DropDownListFor(model => model.MaritalStatusId,
                        new SelectList(Model.MaritailStatusList, "keyvalue", "keydescription", Model.MaritalStatusId), new { @class = "form-control" })
                            @if (!User.IsInRole("ClientEmployees"))
                            {
                                <span class="input-group-addon bg-dark-primary-theme" data-toggle="modal" onclick="quickAdd(event,'MaritalStatus');">
                                    <span class="fa fa-plus"></span>
                                </span>
                            }
                        </div>
                        <div>
                            @Html.ValidationMessageFor(x => x.MaritalStatusId)

                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class=" form-group ">
                        <label>Suffix</label>
                        <div class="input-group">
                            @Html.DropDownListFor(model => model.SuffixId,
                        new SelectList(Model.SuffixList, "keyvalue", "keydescription", Model.SuffixId), new { @class = "form-control" })
                            @if (!User.IsInRole("ClientEmployees"))
                            {
                                <span class="input-group-addon bg-dark-primary-theme" data-toggle="modal" onclick="quickAdd(event,'Suffix');">
                                    <span class="fa fa-plus"></span>
                                </span>
                            }
                        </div>
                        <div>
                            @Html.ValidationMessageFor(x => x.SuffixId)

                        </div>

                    </div>
                </div>
                <div class="col-sm-3">
                    <div class=" form-group ">
                        <label>Prefix</label>
                        <div class="input-group">
                            @Html.DropDownListFor(model => model.PrefixId,
                        new SelectList(Model.PrefixList, "keyvalue", "keydescription", Model.PrefixId), new { @class = "form-control" })
                            @if (!User.IsInRole("ClientEmployees"))
                            {
                                <span class="input-group-addon bg-dark-primary-theme" data-toggle="modal" onclick="quickAdd(event,'Prefix');">
                                    <span class="fa fa-plus"></span>
                                </span>
                            }
                        </div>
                        <div>
                            @Html.ValidationMessageFor(x => x.PrefixId)
                        </div>


                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>Date of Birth</label>
                        @Html.TextBoxFor(model => model.DateOfBirth, "{0:MM/dd/yyyy}", new { @class = "datepicker form-control", data_maxdate = "0" })
                        <div>
                            @Html.ValidationMessageFor(x => x.DateOfBirth)
                        </div>


                    </div>
                </div>
                <div class="col-sm-3">
                    <label>Gender</label>
                    <div class="input-group">
                        @Html.DropDownListFor(model => model.GenderId,
                    new SelectList(Model.GenderList, "keyvalue", "keydescription", Model.GenderId), new { @class = "form-control" })
                        @if (!User.IsInRole("ClientEmployees"))
                        {
                            <span class="input-group-addon bg-dark-primary-theme" data-toggle="modal" onclick="quickAdd(event,'Gender');">
                                <span class="fa fa-plus"></span>
                            </span>
                        }
                    </div>
                    <div>
                        @Html.ValidationMessageFor(x => x.GenderId)
                    </div>

                </div>
                <div class="col-sm-3">
                    <div class=" form-group p-t-30">
                        <div class="checkbox-color checkbox-primary">

                            @if (Model.IsDependent == true)
                            {
                                <input id="@Html.NameFor(x => x.IsDependent)" type="checkbox" checked="checked" />
                            }
                            else

                            {
                                <input id="@Html.NameFor(x => x.IsDependent)" type="checkbox" />
                            }

                            <label for="IsDependent">Is Dependent</label>
                            @Html.HiddenFor(x => x.IsDependent)

                        </div>
                    </div>

                </div>
                <div class="col-sm-3">
                    <div class=" form-group p-t-30">
                        <div class="checkbox-color checkbox-primary">

                            @if (Model.IsStudent == true)
                            {
                                <input id="@Html.NameFor(x => x.IsStudent)" type="checkbox" checked="checked" />
                            }
                            else

                            {
                                <input id="@Html.NameFor(x => x.IsStudent)" type="checkbox" />
                            }

                            <label for="IsStudent">Is Student</label>
                            @Html.HiddenFor(x => x.IsStudent)

                        </div>
                    </div>

                </div>
                <div class="col-sm-3">
                    <div class=" form-group p-t-30">
                        <div class="checkbox-color checkbox-primary">

                            @if (Model.IsApplicant == true)
                            {
                                <input id="@Html.NameFor(x => x.IsApplicant)" type="checkbox" checked="checked" />
                            }
                            else

                            {
                                <input id="@Html.NameFor(x => x.IsApplicant)" type="checkbox" />
                            }

                            <label for="IsApplicant">Is Applicant</label>
                            @Html.HiddenFor(x => x.IsApplicant)

                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class=" form-group p-t-30">
                        <div class="checkbox-color checkbox-primary">

                            @if (Model.IsTrainer == true)
                            {
                                <input id="@Html.NameFor(x => x.IsTrainer)" type="checkbox" checked="checked" />
                            }
                            else

                            {
                                <input id="@Html.NameFor(x => x.IsTrainer)" type="checkbox" />
                            }

                            <label for="IsTrainer">Is Trainer</label>
                            @Html.HiddenFor(x => x.IsTrainer)

                        </div>
                    </div>

                </div>


            }
        </div>

    </div>
</div>



<div class="p-15 text-right">
    <button type="button" class="btn btn-default waves-effect md-close m-r-15">Cancel</button>
    <button type="button" class="btn btn-primary" id="btnSavePersonAjax">Done</button>
</div>

<script src="~/Scripts/jquery.maskedinput.min1.4.0.js"></script>
<script src="~/Scripts/jquery.maskssn.js"></script>
<script>
    $(document).ready(function () {
        pageSetup();
        loading(false);
        var personId = $('#hiddenPersonId').val();
        if (personId == "" || personId == 0 || personId == null) {
            $("#ssn1").attr('disabled', false);
        }
        else {
            $("#ssn1").attr('readonly', true);
        }
        var sshide = $("#ssn1").val();
        if (sshide == "") {
            $("#ssn1").attr('disabled', false);
        }
        else {
            $("#ssn1").attr('readonly', true);
        }
        $("#ssn1").mask('999-99-9999', { placeholder: "_" });
        $("input,select,textarea").not("input[type=hidden]").each(function () {
            $(this).attr("onchange", "PersonFieldValueOnchange(this)");
            //AttachCurrencyAndNumberEvents(this);
        });
    });

    function PersonFieldValueOnchange(fldEle) {
        ValidateElements(fldEle.id);
        //var FiledID = fldEle.id; // Element ID
        //var FieldValue = $("#" + FiledID).val(); // Element Value
        //switch (FiledID) {
        //    case "FieldID":
        //        //Custom Logic
        //        return;
        //        break;

        //    default: break;

        //}
    }
    $("#btnSavePersonAjax").click(function (e) {
        e.preventDefault();


        if (!ValidateForm("PersonForm")) {
            loading(false);
            return;
        }

        var postData = $("#PersonForm").serializeArray();
        var formUrl = $("#ApplicationUrl").val() + "Person/PersonSaveAjax";
        postData[1].value = replaceAll(postData[1].value, "-", "");
        $.post(formUrl, postData, function (data) {
            if (data.succeed === false)
                toastr.error(data.Message);
            else {
                var oldPersonId = $("#hiddenPersonId").val();
                LoadContents($("#HD_VIEW").val(), $("#HD_CONTROLLER").val());
                //LoadMenu("Person", "Person")
                $("#btnSavePersonAjax").parent().find(".md-close").click();
                if (oldPersonId !== "0") {
                    toastr.success(formService.messages.updated);
                }
                else {
                    toastr.success(formService.messages.saved);
                }
            }
        });

    });
</script>

