@model ExecViewHrk.Models.PersonProfileVm
@{
    Layout = null;
}

<div class="main-header p-0">
    <div class="col-md-9 m-b-25 p-0">
        <h4>
            Employee Profile
            <span class="pull-right icon-edit-block m-l-30"><i class="fa fa-expand f-24" onclick="javascript:toggleFullScreen()"></i></span>
        </h4>
    </div>
</div>
<div class="col-lg-12 col-md-12 p-0 b-b-solid p-b-10 m-b-10">
    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="form-inline p-0">
                <div class="col-sm-1 p-0">
                    <div class="form-group m-r-10" id="personPictureDiv">
                        <img class="img img-circle round-img" src="data:image/jpg;base64,@(Model.PersonImageBase64)" />
                    </div>
                </div>
                <div class="col-sm-2 p-r-0">
                    <div class="form-group m-r-15 p-t-5 v-top">
                        <h5 class="m-b-5 f-w-600" id="PersonNameLabel">@Model.FirstName @Model.LastName @*<span class="m-l-10"><i class="fa fa-chevron-circle-right f-24 txt-primary"></i></span>*@</h5>
                        <span class="f-13 f-w-600 text-muted">
                            Company Code : <label id="PersonCompanyCodeLabel">@Model.CompanyCode</label>

                        </span>
                    </div>
                </div>
                <div class="col-sm-1 p-0">
                    <div class="form-group m-r-5 p-t-5 v-top">
                        <label class="f-13 f-w-600">File Number</label><br />
                        <span class="f-13 f-bold txt-primary" id="PersonPositionTitleLabel">@Model.FileNumber</span>
                    </div>
                </div>
                <div class="col-sm-2 p-0">
                    <div class="form-group m-r-5 p-t-5 v-top">
                        <label class="f-13 f-w-600">Position</label><br />
                        <span class="f-13 f-bold txt-primary" id="PersonPositionTitleLabel">@ViewBag.title</span>
                    </div>
                </div>
                <div class="col-sm-1 p-0">
                    <div class="form-group m-r-5 p-t-5 v-top">
                        <label class="f-13 f-w-600">Hire Date</label><br />
                        <span class="f-13 f-bold txt-primary" id="PersonHireDateLabel">@Model.HireDate</span>
                    </div>
                </div>
                <div class="col-sm-1 p-0">
                    <div class="form-group m-r-5 p-t-5 v-top">
                        <label class="f-13 f-w-600">Phone</label><br />
                        <span class="f-13 f-bold txt-primary" id="PersonPhoneLabel">@Model.PhoneNumber</span>
                    </div>
                </div>
                <div class="col-sm-4 p-0 text-right">
                    <div class="form-group m-r-20 p-t-5 v-top text-left">
                        @*@if (User.Identity.GetRequestType() == "NSS")
                        {*@
                            <label class="f-13 f-w-600">Employee Search</label><br />
                            <div class="input-group" id="personSearch">
                                <input type="text" id="txtEmployeeSearch" style="width:170px" class="form-control f-w-600" placeholder="Search..">
                            </div>
                        @*}*@
                    </div>
                    @*</div>
            <div class="col-sm-2 p-0">*@
                    <div class="form-group p-t-35 v-top pull-right">
                        <span class="block">
                            <i class="fa fa-chevron-left f-24 p-r-5" onclick="refreshScreen(@Model.PreviousPersonId)"></i>
                            <label class="f-18 f-w-600 m-0 v-top text-tranform-lower">@Model.SearchIndex to @Model.PersonsList.Count()</label>
                            <i class="fa fa-chevron-right f-24 p-l-5" onclick="refreshScreen(@Model.NextPersonId)"></i>
                        </span>
                    </div>
                </div>
              
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#SelectedPersonID").val("@Model.PersonId");
        $("#SelectedPersonType").val("E");
        $("#txtEmployeeSearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: $("#ApplicationUrl").val() + "Person/EmployeeList_Read",
                    type: "POST",
                    dataType: "json",
                    data: { text: request.term },
                    success: function (data) {
                        if (data.length > 0) {
                            response($.map(data, function (item) {
                                return { label: item.PersonName, value: item.PersonId };
                            }))
                        } else {
                            response([{ label: 'No Results Found', value: '0' }]);
                        }
                    }
                })
            },
            select: function (event, ui) {
                if (ui.item.value != '0') {
                    refreshScreen(ui.item.value);
                }
            },
            close: function (event, ui) {
                $("#txtEmployeeSearch").val('');
            },
            messages: {
                noResults: '',
                results: function (resultsCount) { }
            },
            minLength: 2
        });
    })
</script>

